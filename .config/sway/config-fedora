for_window [shell=".*"] title_format "%title :: %shell"

#set $gnome-schema org.gnome.desktop.interface

exec_always {
    gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita'
    gsettings set org.gnome.desktop.interface icon-theme 'Adwaita'
    gsettings set org.gnome.desktop.interface cursor-theme 'Adwaita'
}


# auto start services
##################################################
#exec --no-startup-id xrdb -merge $HOME/.Xresources
exec --no-startup-id redshift -l 33.4:-112 -t 5500:3300 -g 0.8 -m wayland
exec --no-startup-id waybar


# font
#Font "xft:Inconsolata Nerd Font"
#font pango:Inconsolata Nerd Font 12
font pango: ter-v32n

# Logo key. Use Mod1 for Alt.
set $mod Mod4

bindsym F12 exec --no-startup-id mpv --force-window=immediate --geometry=800x450 --ytdl-format="best[height=360]" "$(wl-paste -p -n)"

# input method
##################################################
#exec --no-startup-id fcitx-autostart

#exec --no-startup-id ibus-daemon -drx -p disable
#exec --no-startup-id ibus-daemon -drx -p disable --address unix:tmpdir=/tmp/ibus.socket
#bindsym $mod+F4 mode "$im_system"
#set $im_system (e)nglish, (s)panish, (j)apanese, (c)hinese
#mode "$im_system" {
#	bindsym s exec ibus engine xkb:es::spa, mode "default"   
#       bindsym e exec ibus engine xkb:us::eng, mode "default"   
#	bindsym j exec ibus engine kkc, mode "default"   
#	#bindsym c exec ibus engine pinyin, mode "default"
#	bindsym Return mode "default"
#	bindsym Escape mode "default"
#}




# window rules
##################################################
#for_window [app_id="nautilus"] border none
#for_window [class="vlc"] floating enable
for_window [class="feh"] floating enable
for_window [app_id="mpv"] floating enable
#for_window [class="zoom"] floating enable
for_window [class="Quartus"] floating enable


# key config
##################################################
#F1 	113 	XF86AudioMute 	Mute speakers 	No
#bindsym XF86AudioMute exec "amixer set Master toggle"
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle

#F2 	114 	XF86AudioLowerVolume 	Decreases the speaker volume 	No
#bindsym XF86AudioLowerVolume exec "amixer set Master 10%-"
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%

#F3 	115 	XF86AudioRaiseVolume 	Increases the speaker volume 	No
#bindsym XF86AudioRaiseVolume exec "amixer set Master 10%+"
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%

#F4 	190 	XF86AudioMicMute 	Mutes/unmutes microphone 	No
#bindsym XF86AudioMicMute exec "amixer set Mic toggle"
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

#F5 	224 	XF86MonBrightnessDown 	Darkens display 	No
bindsym XF86MonBrightnessDown exec "brightlight -p -d 10"
#F6 	225 	XF86MonBrightnessUp 	Brightens display 	No
bindsym XF86MonBrightnessUp exec "brightlight -p -i 10"

#F7 	227 	XF86Display 	Switch between internal and external display 	No
#F8 	238 	XF86WLAN 	Enable/disable wireless 	Yes
#F9 	171 	XF86Tools 	Open "Control Panel" 	No
#F10 	217 	XF86Search 	Open "Windows Search" 	No
#F11 	120 	XF86LaunchA 	View open programs 	No
#F12 	144 	XF86Explorer 	Open "Computer" 	No #

#bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
#bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
#bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
#bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
#bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
#bindsym XF86MonBrightnessUp exec brightnessctl set +5%

# mousekeys config
##################################################

# display config
##################################################
#swaymsg -t get_outputs for example eDP-1.
set $laptop eDP-1
bindswitch lid:on output $laptop disable
bindswitch lid:off output $laptop enable

#output HDMI1 scale 2
#output HDMI1 pos 0 0 res 3200x1800
#output eDP1 pos 1600 0 res 1920x1080
#Note that the x-pos of eDP1 is 1600 = 3200/2.

#Display rotation
#output <name> transform 90



# Media player controls
##################################################
#using qt-dbus for vlc play
#bindsym 2 exec dbus-send --type=method_call --dest=org.mpris.MediaPlayer2.vlc /org/mpris/MediaPlayer2   org.mpris.MediaPlayer2.Player.PlayPause

#bindsym XF86AudioPlay exec playerctl play-pause
#bindsym XF86AudioPlay exec playerctl play
#bindsym XF86AudioPause exec playerctl pause
#bindsym XF86AudioNext exec playerctl next
#bindsym XF86AudioPrev exec playerctl previous

bindsym $mod+Home Mode "dvlc"
mode "dvlc" {
	bindsym 1 exec playerctl position 3-
	bindsym 3 exec playerctl position 10-
	bindsym 2 exec playerctl play-pause
	bindsym 8 exec playerctl next
	bindsym 7 exec playerctl previous
    	bindsym Escape mode "default"
}

# vlc --intf oldrc sock: /tmp/vlcsock or localhost:port
#bindsym $mod+F3 Mode "vlc"
#mode "vlc" {
#	bindsym 1 exec "sh $HOME/.config/vlc/rewind3.sh 3"
#	bindsym 3 exec "sh $HOME/.config/vlc/rewind3.sh 10" 
#	bindsym 2 exec "sh $HOME/.config/vlc/rewind3.sh 0" 
	#bindsym 2 exec "echo pause | ncat localhost $vp"
	##bindsym 2 exec "echo pause | nc -c localhost 50500"
#}

##################################################
# Default config for sway
# Copy this to ~/.config/sway/config and edit it to your liking.
# Read `man 5 sway` for a complete reference.

### Variables

# Logo key. Use Mod1 for Alt.
#set $mod Mod4

# Home row direction keys, like vim
set $left j                 
set $down k                 
set $up l                   
set $right semicolon        

#set $left h  
#set $down j  
#set $up k    
#set $right l 


# Configure border style <normal|1pixel|pixel xx|none|pixel>
#default_border none
#default_border pixel 1
#default_floating_border normal

# Hide borders
hide_edge_borders none

# change borders
bindsym $mod+u border none
bindsym $mod+y border pixel 1
bindsym $mod+n border normal

# Your preferred terminal emulator
set $term alacritty
#set $term urxvt

# set drop down menu to F1 key
##################################################
#no_focus <critiera>
#bindsym Mod4+F1 exec --no-startup-id urxvt -name dock 
bindsym Mod4+F1 exec --no-startup-id alacritty --title=dock
for_window [title="dock"] floating enable, move scratchpad, scratchpad show, \
			resize set width 1920, move position 0px 0px, mark drop-term
bindsym F1 [con_mark="drop-term"] scratchpad show
 
# Your preferred application launcher
# Note: it's recommended that you pass the final command to sway
#set $menu dmenu_path | dmenu | xargs swaymsg exec --
#set $menu bemenu-run -i -p '' --fn "Terminus 12" | xargs swaymsg exec --
set $menu wofi --show run | xargs swaymsg exec --
#set $menu rofi -show combi | xargs swaymsg exec --

# Your preferred clipboard manager
#exec wl-paste -t text --watch clipman store
#bindsym $mod+h exec clipman pick

exec wl-paste -p -n --watch clipman store --histpath="/tmp/clipman-primary.json"
bindsym F10 exec clipman pick --tool="wofi" --histpath="/tmp/clipman-primary.json" && wl-paste | wl-copy -p -n

##################################################
### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
#output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
#output $laptop bg /home/chewie/.fedora.jpg fill
output $laptop bg /home/chewie/.cern.jpg fill

# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: 
# swaymsg -t get_outputs

### Idle configuration
          #timeout 300 'swaylock -f -c 000000' \
##################################################
 exec swayidle -w \
          timeout 300 'swaymsg "output * dpms off"' \
               resume 'swaymsg "output * dpms on"' 
          #timeout 600 'swaymsg "output * dpms off"' \
          #before-sleep 'swaylock -f -c 000000' 

# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

### Input configuration
##################################################
#   input "2:14:SynPS/2_Synaptics_TouchPad" {
#       dwt enabled
#       tap enabled
#       natural_scroll enabled
#       middle_emulation enabled
# 	pointer_accel 0.3 #Changing the pointer speed
#   }
# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.

#keyboard

input "1:1:AT_Translated_Set_2_keyboard" { 
	 	xkb_layout us,es
		 xkb_options caps:escape,grp:alt_space_toggle
	#	xkb_rules "keycode 65 = keycode 66"
 }
##!/bin/bash
## set XKB layout
#setxkbmap -layout us
## turn on mousekeys
#xkbset m
## stop mousekeys expiring after a timeout
#xkbset exp =m
## map keysym to other keysym
#xmodmap -e "keysym Menu = Pointer_Button2"
## this also works
## xmodmap -e "keycode 135 = Pointer_Button2"

#repeat_delay 500
#repeat_rate 5
#xkb_variant ,nodeadkeys
#xkb_options grp:alt_shift_toggle
		 #xkb_options caps:escape,grp:shift_space_toggle


# buttons 
    input "6058:20564:ThinkPad_Extra_Buttons" {
	    #left_handed enabled 
    }
   
# Touchpad controls
#bindsym XF86TouchpadToggle exec /some/path/toggletouchpad.sh # toggle touchpad
#
# touchpad
    input "1739:0:Synaptics_TM3053-004" { 
	dwt enabled
	tap enabled 
	tap_button_map lmr
    }
    input "2:7:SynPS/2_Synaptics_TouchPad" { 
	dwt enabled
	tap enabled 
	tap_button_map lmr
    }

	#click_method button_areas
	#tap_button_map lrm|lmr
	#middle_emulation enabled
	#left_handed enabled 
	#natural_scroll enabled



### Key bindings
#
# Basics:
#
    # Start a terminal
    bindsym $mod+Return exec $term

    # Kill focused window
    bindsym $mod+Shift+q kill

    # Start your launcher
    # bindsym $mod+d exec $menu
    bindsym F9 exec $menu

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Despite the name, also works for non-floating windows.
    # Change normal to inverse to use left mouse button for resizing and right
    # mouse button for dragging.
    floating_modifier $mod normal

    # Reload the configuration file
    bindsym $mod+Shift+c reload

    # Exit sway (logs you out of your Wayland session)
    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

bindsym Print exec --no-startup-id grim
bindsym $mod+Print --release exec --no-startup-id grim -g "$(slurp)"
bindsym $mod+Shift+Print --release exec --no-startup-id grim -g "$(swaymsg -t get_tree | jq -r '.. | select(.pid? and .visible?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"' | slurp)"

#
# Moving around:
#
    # Move your focus around
    bindsym $mod+$left focus left
    bindsym $mod+$down focus down
    bindsym $mod+$up focus up
    bindsym $mod+$right focus right
    # Or use $mod+[up|down|left|right]
    bindsym $mod+Left focus left
    bindsym $mod+Down focus down
    bindsym $mod+Up focus up
    bindsym $mod+Right focus right

    # Move the focused window with the same, but add Shift
    bindsym $mod+Shift+$left move left
    bindsym $mod+Shift+$down move down
    bindsym $mod+Shift+$up move up
    bindsym $mod+Shift+$right move right
    # Ditto, with arrow keys
    bindsym $mod+Shift+Left move left
    bindsym $mod+Shift+Down move down
    bindsym $mod+Shift+Up move up
    bindsym $mod+Shift+Right move right





#
# Workspaces:
#
    # Switch to workspace
    bindsym $mod+1 workspace 1
    bindsym $mod+2 workspace 2
    bindsym $mod+3 workspace 3
    bindsym $mod+4 workspace 4
    bindsym $mod+5 workspace 5
    bindsym $mod+6 workspace 6
    bindsym $mod+7 workspace 7
    bindsym $mod+8 workspace 8
    bindsym $mod+9 workspace 9
    #bindsym $mod+0 workspace 10
    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace 1
    bindsym $mod+Shift+2 move container to workspace 2
    bindsym $mod+Shift+3 move container to workspace 3
    bindsym $mod+Shift+4 move container to workspace 4
    bindsym $mod+Shift+5 move container to workspace 5
    bindsym $mod+Shift+6 move container to workspace 6
    bindsym $mod+Shift+7 move container to workspace 7
    bindsym $mod+Shift+8 move container to workspace 8
    bindsym $mod+Shift+9 move container to workspace 9
    #bindsym $mod+Shift+0 move container to workspace 10
    # Note: workspaces can have any name you want, not just numbers.
    # We just use 1-10 as the default.
    
    
    
    




#
# Layout stuff:
#
    # You can "split" the current object of your focus with
    # $mod+b or $mod+v, for horizontal and vertical splits
    # respectively.
    bindsym $mod+b splith
    bindsym $mod+v splitv

    # Switch the current container between different layout styles
    bindsym $mod+s layout stacking
    bindsym $mod+t layout tabbed
    bindsym $mod+e layout toggle split
    bindsym $mod+q split toggle

    # Make the current focus fullscreen
    bindsym $mod+f fullscreen

    # Toggle the current focus between tiling and floating mode
    bindsym $mod+Shift+space floating toggle

    # Swap focus between the tiling area and the floating area
    bindsym $mod+space focus mode_toggle

    # Move focus to the parent container
    bindsym $mod+a focus parent
#
# Scratchpad:
#
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+minus scratchpad show









#
# Resizing containers:
#
bindsym $mod+r mode "resize"
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindsym $left resize shrink width 100px
    bindsym $down resize grow height 100px
    bindsym $up resize shrink height 100px
    bindsym $right resize grow width 100px

    # Ditto, with arrow keys
    bindsym Left resize shrink width 100px
    bindsym Down resize grow height 100px
    bindsym Up resize shrink height 100px
    bindsym Right resize grow width 100px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
#bar {
#    position top
#    # When the status_command prints a new line to stdout, swaybar updates.
#    # The default just shows the current date and time.
#	swaybar_command waybar
#}

# Set shut down, restart and locking features
bindsym $mod+0 mode "$m_system"
set $m_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown
mode "$m_system" {
    #bindsym l exec --no-startup-id systemctl lock, mode "default"
    #bindsym u exec --no-startup-id systemctl switch_user, mode "default"
    #bindsym e exec --no-startup-id systemctl logout, mode "default"
    #bindsym h exec --no-startup-id systemctl hibernate, mode "default"
    #
    #bindsym e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'
    
    bindsym l exec --no-startup-id swaylock -f -c 8cafe8, mode "default"
    bindsym h exec --no-startup-id systemctl hibernate, mode "default"
    #bindsym u exec --no-startup-id systemctl switch_user, mode "default"
    bindsym e exec --no-startup-id swaymsg exit, mode "default"
    bindsym s exec --no-startup-id swaylock -f -c 8cafe8 && systemctl suspend, mode "default"
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym Shift+s exec --no-startup-id shutdown -h now, mode "default"

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

include /etc/sway/config.d/*

